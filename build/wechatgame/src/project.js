require=function r(a,c,s){function u(t,e){if(!c[t]){if(!a[t]){var o="function"==typeof require&&require;if(!e&&o)return o(t,!0);if(l)return l(t,!0);var n=new Error("Cannot find module '"+t+"'");throw n.code="MODULE_NOT_FOUND",n}var i=c[t]={exports:{}};a[t][0].call(i.exports,function(e){return u(a[t][1][e]||e)},i,i.exports,r,a,c,s)}return c[t].exports}for(var l="function"==typeof require&&require,e=0;e<s.length;e++)u(s[e]);return u}({AnimEffectScript:[function(e,t,o){"use strict";cc._RF.push(t,"4ec2cWZS9BDqaEjgzMQEQ0V","AnimEffectScript"),Object.defineProperty(o,"__esModule",{value:!0});var n=cc._decorator,i=n.ccclass,r=(n.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.onEnable=function(){var e=this.getComponent(cc.Animation);e&&e.play()},t.prototype.onDisable=function(){var e=this.getComponent(cc.Animation);e&&e.stop()},t=__decorate([i],t)}(cc.Component));o.default=r,cc._RF.pop()},{}],AudioMgr:[function(e,t,o){"use strict";cc._RF.push(t,"681da4n1/JHaKZYVrhLFq9u","AudioMgr"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("./GameManager"),i=function(){function o(){}return o.init=function(){cc.audioEngine.setMaxAudioInstance(o.MAX_AUDIO_NUM)},o.getUrl=function(e){return cc.url.raw("resources/audio/effectAudio/"+e)},o.playBGM=function(e){o.audioUrl=e;var t=o.getUrl(e);0<=o.bgmAudioID&&cc.audioEngine.stop(o.bgmAudioID),o.bgmAudioID=cc.audioEngine.play(t,!0,o.bgmVolume)},o.StopBGM=function(){cc.audioEngine.pause(o.bgmAudioID)},o.playSFX=function(e){if(0<o.sfxVolume){var t=o.getUrl(e);cc.audioEngine.play(t,!1,o.sfxVolume)}},o.setSFXVolume=function(e){o.sfxVolume!=e&&(cc.sys.localStorage.setItem("sfxVolume",e),o.sfxVolume=e)},o.setBGMVolume=function(e){0<=o.bgmAudioID&&(0<e?cc.audioEngine.resume(o.bgmAudioID):cc.audioEngine.pause(o.bgmAudioID)),o.bgmVolume!=e&&(cc.sys.localStorage.setItem("bgmVolume",e),o.bgmVolume=e,cc.audioEngine.setVolume(o.bgmAudioID,e))},o.pauseAll=function(){cc.audioEngine.stopAll()},o.resumeAll=function(){cc.audioEngine.stopAll(),n.default.gameState==n.GameState.Hall&&""!=o.audioUrl&&o.playBGM(o.audioUrl)},o.bgmVolume=1,o.sfxVolume=1,o.bgmAudioID=0,o.bgmCurrentTime=0,o.MAX_AUDIO_NUM=10,o.audioUrl="",o}();o.default=i,cc._RF.pop()},{"./GameManager":"GameManager"}],GameManager:[function(e,t,o){"use strict";cc._RF.push(t,"10c533gBTdBPaB+dQQqOuwf","GameManager"),Object.defineProperty(o,"__esModule",{value:!0});var n,i,r,a,c,s,u=e("./VideoAd");(i=n=o.GameState||(o.GameState={}))[i.Hall=0]="Hall",i[i.Game=1]="Game",(a=r=o.PlayState||(o.PlayState={}))[a.stop=1]="stop",a[a.useItem=2]="useItem",a[a.normal=3]="normal",a[a.dead=4]="dead",a[a.over=5]="over",(s=c=o.ItemType||(o.ItemType={}))[s.hummer=1]="hummer",s[s.brush=2]="brush",s[s.change=3]="change",s[s.change_1=6]="change_1",s[s.regret=4]="regret",s[s.none=5]="none";var l=function(){function e(){}return e.saveItemData=function(){cc.sys.localStorage.setItem("itemData",this.itemDataToString())},e.getItemData=function(){return cc.sys.localStorage.getItem("itemData")},e.itemDataToString=function(){return this.userInfo.hummer+"_"+this.userInfo.brush+"_"+this.userInfo.change},e.gameState=n.Hall,e.PLAYSTATE=r.normal,e.ITEMTYPE=c.none,e.STATICARR=[2,4,8,16,32,64,128,256,512,1024],e.userInfo=null,e.VIDEOAD=u.default.instance,e}();o.default=l,cc._RF.pop()},{"./VideoAd":"VideoAd"}],GameProp:[function(e,t,o){"use strict";cc._RF.push(t,"19dc8RdbY1DRLImraouDb9n","GameProp"),Object.defineProperty(o,"__esModule",{value:!0});var r=e("./GameManager"),n=e("./Game"),i=cc._decorator,a=i.ccclass,c=i.property,s=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.showItemSp=null,e.itemSprite=null,e.desLab=null,e.hemmerSp=null,e.changeSp=null,e.brushSp=null,e.regretSp=null,e}return __extends(e,t),e.prototype.start=function(){},e.prototype.onClickMask=function(){this.node.active=!1,r.default.ITEMTYPE!=r.ItemType.change_1&&r.default.ITEMTYPE!=r.ItemType.change||n.default.instance.stopChangeEvent()},e.prototype.init=function(e,t){var o=t.parent.convertToWorldSpaceAR(t.position),n=this.showItemSp.node.parent.convertToNodeSpaceAR(o),i=t.getComponent(cc.Sprite).spriteFrame;switch(e){case r.ItemType.hummer:this.showItemSp.spriteFrame=i,this.showItemSp.node.position=n,this.desLab.string="锤子",this.itemSprite.spriteFrame=this.hemmerSp;break;case r.ItemType.brush:this.showItemSp.spriteFrame=i,this.showItemSp.node.position=n,this.desLab.string="刷子",this.itemSprite.spriteFrame=this.brushSp;break;case r.ItemType.change:this.showItemSp.spriteFrame=i,this.showItemSp.node.position=n,this.desLab.string="换位",this.itemSprite.spriteFrame=this.changeSp;break;case r.ItemType.regret:this.showItemSp.spriteFrame=i,this.showItemSp.node.position=n,this.desLab.string="反悔",this.itemSprite.spriteFrame=this.regretSp}},__decorate([c(cc.Sprite)],e.prototype,"showItemSp",void 0),__decorate([c(cc.Sprite)],e.prototype,"itemSprite",void 0),__decorate([c(cc.Label)],e.prototype,"desLab",void 0),__decorate([c(cc.SpriteFrame)],e.prototype,"hemmerSp",void 0),__decorate([c(cc.SpriteFrame)],e.prototype,"changeSp",void 0),__decorate([c(cc.SpriteFrame)],e.prototype,"brushSp",void 0),__decorate([c(cc.SpriteFrame)],e.prototype,"regretSp",void 0),e=__decorate([a],e)}(cc.Component);o.default=s,cc._RF.pop()},{"./Game":"Game","./GameManager":"GameManager"}],GameUtils:[function(e,t,o){"use strict";cc._RF.push(t,"e1313dDnstBzayNAmy4j035","GameUtils"),Object.defineProperty(o,"__esModule",{value:!0});var n=function(){function e(){}return e.popTips=function(e,t){var o=new cc.Node,n=o.addComponent(cc.Label);o.addComponent(cc.LabelOutline).width=1.5,n.string=t,n.fontSize=40,e.addChild(o),o.setPosition(0,-200);var i=cc.moveBy(.5,0,200),r=cc.fadeTo(.5,0),a=cc.callFunc(function(){var e=cc.spawn(i,r),t=cc.sequence(e,cc.callFunc(function(){o.active=!1,o.removeFromParent(),o.destroy()}));o.runAction(t)}),c=cc.sequence(i,cc.delayTime(.8),a);o.runAction(c)},e.showText=function(e){},e}();o.default=n,cc._RF.pop()},{}],Game:[function(e,t,o){"use strict";cc._RF.push(t,"64b8176Jz1ACbR6ZTDH7KkE","Game"),Object.defineProperty(o,"__esModule",{value:!0});var u,n,l,i,r,a,p=e("./Item"),c=e("./AudioMgr"),m=e("./GameManager"),s=e("./HintUI"),h=e("./config"),d=e("./GameProp"),f=e("./GetItemUI"),g=cc._decorator,_=g.ccclass,y=g.property;(n=u=o.slideDirection||(o.slideDirection={}))[n.LeftRight=1]="LeftRight",n[n.UpDown=2]="UpDown",(i=l=o.direction||(o.direction={}))[i.left=0]="left",i[i.right=1]="right",i[i.up=2]="up",i[i.down=3]="down",(a=r||(r={}))[a.success_2048=2048]="success_2048",a[a.success_4096=4096]="success_4096",a[a.success_8192=8192]="success_8192",a[a.success_16384=16384]="success_16384",a[a.success_32768=32768]="success_32768";var v=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.numberAtlas=null,e.squareItem=null,e.content=null,e.uiLayer=null,e.gameOverNode=null,e.showItemNode=null,e.pauseGameNode=null,e.reliveNode=null,e.maskNode=null,e.continueNode=null,e.hintUINode=null,e.getItemView=null,e.targetLab=null,e.currentLab=null,e.historyLab=null,e.startEffectDrag=null,e.successEffectDrag=null,e.hummerEffectDrag=null,e.brushEffectDrag=null,e.mergePrefab=null,e.hummerPrefab=null,e.popStarPrefab=null,e.brushLab=null,e.hummerLab=null,e.changeLab=null,e._successPhase=r.success_2048,e._pos=null,e._endPos=null,e._startPos=null,e._cancelPos=null,e._score=0,e._historyScore=null,e._step=0,e._mergeStep=0,e.squareNum=4,e._sqrt=null,e._sqrt2=null,e._direction=l.left,e._slide=u.LeftRight,e._effect_armature=null,e._success_armature=null,e._hummer_armature=null,e._brush_armature=null,e.hummerTarNode=null,e.brushTarNode=null,e.changeTarNode1=null,e.changeTarNode2=null,e._isMerge=!1,e._audioID=0,e._clickFlag=!0,e._clickItem=m.ItemType.none,e._isVideoPlay=!1,e._mergeNode=new Array,e}var o;return __extends(e,t),o=e,Object.defineProperty(e,"instance",{get:function(){return o._instance},enumerable:!0,configurable:!0}),e.prototype.onLoad=function(){var e=this;m.default.gameState=m.GameState.Hall,(o._instance=this).initGame(),this.content.width=this._sqrt[0][0].width*this.squareNum+20*(this.squareNum+1),this.content.height=this._sqrt[0][0].height*this.squareNum+20*(this.squareNum+1),this.content.on(cc.Node.EventType.TOUCH_END,this.touchEnd,this),this.content.on(cc.Node.EventType.TOUCH_START,this.touchStart,this),this.content.on(cc.Node.EventType.TOUCH_CANCEL,this.touchCancel,this),this.maskNode.on(cc.Node.EventType.TOUCH_END,function(){e.continueNode.active=!0,e.successEffectDrag.node.parent.active=!1},this),this.initEffect(),this.initView()},e.prototype.initGame=function(){var e=this;this._sqrt=new Array,this._sqrt2=new Array;for(var t=0;t<this.squareNum;t++)this._sqrt2[t]=new Array;for(t=0;t<this.squareNum;t++){this._sqrt[t]=new Array;for(var o=0;o<this.squareNum;o++){var n=cc.instantiate(this.squareItem);n.name=t+""+o,this._sqrt[t][o]=n,this._sqrt2[o][t]=n,this.content.addChild(n),this.initPos(n,t,o)}}this.scheduleOnce(function(){e.initGrid()},.2)},e.prototype.initPos=function(e,t,o){var n=e.width*o+e.width/2+20*(o+1),i=e.height*t+e.width/2+20*(t+1)+20;e.position=cc.v2(n,-i)},e.prototype.initGrid=function(){var e=this.randomLocation(),t=this.randomLocation(),o=this.randomNumber(),n=this.randomNumber(),i=this.content.getChildByName(e.l+""+e.r),r=this.content.getChildByName(t.l+""+t.r);i.getComponent(p.default).showNumber(o,!0),r.getComponent(p.default).showNumber(n,!0)},e.prototype.initView=function(){this.targetLab.string=this._successPhase+"",this.setLabInfo(),this.setHistoryLab(),this.initBottomItem()},e.prototype.initBottomItem=function(){var e=m.default.userInfo;this.brushLab.string=e.brush+"",this.hummerLab.string=e.hummer+"",this.changeLab.string=e.change+""},e.prototype.setLabInfo=function(){this.currentLab.string=this._score+""},e.prototype.setHistoryLab=function(){this._historyScore=cc.sys.localStorage.getItem("score"),this.historyLab.string=this._historyScore?this._historyScore:"0"},e.prototype.saveHistoryScore=function(){this._score>Number(this._historyScore)&&cc.sys.localStorage.setItem("score",this._score)},e.prototype.initEffect=function(){this.hummerEffectDrag.node.active=!0,this.brushEffectDrag.node.active=!0,this.startEffectDrag.node.parent.active=!0,this.successEffectDrag.node.parent.active=!0,this._effect_armature=this.startEffectDrag.armature(),this._success_armature=this.successEffectDrag.armature(),this._hummer_armature=this.hummerEffectDrag.armature(),this._brush_armature=this.brushEffectDrag.armature(),this.successEffectDrag.addEventListener(dragonBones.EventObject.COMPLETE,this.successEventHandler,this),this.hummerEffectDrag.addEventListener(dragonBones.EventObject.COMPLETE,this.hummerEventHandler,this),this.brushEffectDrag.addEventListener(dragonBones.EventObject.COMPLETE,this.brushEventHandler,this),this.successEffectDrag.node.parent.active=!1,this.hummerEffectDrag.node.active=!1,this.brushEffectDrag.node.active=!1},e.prototype.onReturnHall=function(){cc.director.loadScene("Hall")},e.prototype.onClickPauseBtn=function(){this.pauseGameNode.active=!0},e.prototype.onClickReliveCloseBtn=function(){this.reliveNode.active=!1,this.showGameOverUI()},e.prototype.onClickLookVideoClose=function(){this.getItemView.active=!1},e.prototype.showReliveUI=function(){this.reliveNode.active=!0},e.prototype.onClickMusic=function(e){var t=e.target,o=t.getChildByName("on"),n=t.getChildByName("off");o.active?(c.default.setSFXVolume(0),o.active=!1,n.active=!0):(c.default.setSFXVolume(1),o.active=!0,n.active=!1)},e.prototype.onClickContinueGame=function(){this.pauseGameNode.active=!1},e.prototype.onClickContinueGameNextPhase=function(){var e=this;this.scheduleOnce(function(){e.continueNode.active=!1,e.initView(),e.showHintUI(s.HintUIType.Success,"目标已更新!")},.1)},e.prototype.onClickReliveBtn=function(){var e=this;this._isVideoPlay||(this.reliveNode.active=!1,m.default.VIDEOAD.getRewardedVideoAd(function(){e.clear2Or4(),e._isVideoPlay=!1},function(){e.showGameOverUI(),e._isVideoPlay=!1}),this._isVideoPlay=!0)},e.prototype.onClickVideoLook=function(){var e=this;this._isVideoPlay||(m.default.VIDEOAD.getRewardedVideoAd(function(){e.getItemByVideo(),e._isVideoPlay=!1},function(){e._isVideoPlay=!1}),this._isVideoPlay=!0)},e.prototype.getItemByVideo=function(){this.getItemView.active=!1,this._clickItem==m.ItemType.brush?m.default.userInfo.brush+=2:this._clickItem==m.ItemType.hummer?m.default.userInfo.hummer+=2:this._clickItem==m.ItemType.change&&(m.default.userInfo.change+=2),m.default.saveItemData(),this.initBottomItem()},e.prototype.clear2Or4=function(){m.default.PLAYSTATE=m.PlayState.dead,this.reliveNode.active=!1,this._clickFlag=!0;for(var e=this.content.childrenCount,t=0;t<e;t++){var o=this.content.children[t].getComponent(p.default).getNum();2!==o&&4!==o||(this.content.children[t].getComponent(p.default).playPopEffect(),this.content.children[t].getComponent(p.default).playHummerEffect())}this.scheduleOnce(function(){m.default.PLAYSTATE=m.PlayState.normal},1)},e.prototype.onClickShareBtn=function(){var e=this;cc.sys.platform===cc.sys.WECHAT_GAME?wx.shareAppMessage({title:"来看看谁的得分最高!",imageUrl:h.default.shareImg_url,success:function(){console.log("转发成功!"),e.showHintUI(s.HintUIType.Success,"转发成功,多谢你的支持!")},fail:function(e){console.log("转发失败---\x3e>",e),this.showHintUI(s.HintUIType.Failure,"转发失败!")}}):this.showHintUI(s.HintUIType.Failure,"该平台不支持分享!")},e.prototype.brushEventHandler=function(e){cc.log("custom---",e.detail.animationState.name),this.brushTarNode&&(this.brushTarNode.getComponent(p.default).showRandomNumber(),this.brushEffectDrag.node.active=!1),m.default.PLAYSTATE=m.PlayState.normal,m.default.ITEMTYPE=m.ItemType.none,this.calcUserItem(m.ItemType.brush)},e.prototype.hummerEventHandler=function(e){cc.log("custom---",e.detail.animationState.name),this.hummerTarNode&&(this.hummerTarNode.getComponent(p.default).playHummerEffect(),this.hummerEffectDrag.node.active=!1),m.default.PLAYSTATE=m.PlayState.normal,m.default.ITEMTYPE=m.ItemType.none,this.calcUserItem(m.ItemType.hummer)},e.prototype.changeEventEffect=function(){var e=this;if(this.changeTarNode1&&this.changeTarNode2){var t=this.changeTarNode1.position,o=this.changeTarNode2.position,n=cc.callFunc(function(){e.content.removeChild(h),h.removeFromParent(),h.destroy()}),i=cc.callFunc(function(){e.content.removeChild(d),d.removeFromParent(),d.destroy()}),r=cc.moveTo(.5,o).easing(cc.easeOut(3)),a=cc.moveTo(.5,t).easing(cc.easeOut(3)),c=cc.sequence(r,n),s=cc.sequence(a,i),u=this.changeTarNode1.getComponent(p.default).getNum(),l=this.changeTarNode2.getComponent(p.default).getNum();this.changeTarNode1.getComponent(p.default).showNumber(0),this.changeTarNode2.getComponent(p.default).showNumber(0);var h=cc.instantiate(this.squareItem);h.getComponent(p.default).showNumber(u),h.getComponent(p.default).numberSp.spriteFrame=this.numberAtlas.getSpriteFrame(u+"_a"),h.position=t,this.content.addChild(h);var d=cc.instantiate(this.squareItem);d.getComponent(p.default).showNumber(l),d.position=o,this.content.addChild(d),h.runAction(c),d.runAction(s),this.scheduleOnce(function(){e.changeTarNode1.getComponent(p.default).showNumber(l),e.changeTarNode2.getComponent(p.default).showNumber(u),e.changeTarNode1.getComponent(p.default).hideLightEffect(),e.changeTarNode1.getComponent(p.default).hideLightEffect(),m.default.PLAYSTATE=m.PlayState.normal,m.default.ITEMTYPE=m.ItemType.none,e.hideMaskItem(),e.calcUserItem(m.ItemType.change)},.5)}else cc.log("err--\x3e>换位节点没选完啊")},e.prototype.stopChangeEvent=function(){this.changeTarNode1&&(this.changeTarNode1.getComponent(p.default).hideLightEffect(),m.default.PLAYSTATE=m.PlayState.normal,m.default.ITEMTYPE=m.ItemType.none),m.default.PLAYSTATE=m.PlayState.normal,m.default.ITEMTYPE=m.ItemType.none},e.prototype.successEventHandler=function(e){switch(cc.log(this._success_armature.animation.lastAnimationName),this._success_armature.animation.lastAnimationName){case"fenxiang1":this.maskNode.active=!0;var t=this.getEffectNameByType();this._successPhase=this.getTargetScoreByType(this._successPhase),this._success_armature.animation.fadeIn(t,-1,-1,0);break;case"jiangbei2048chuxian":this._success_armature.animation.fadeIn("jiangbei2048jingzhi",-1,-1,0,"normal");break;case"jiangbei4096chuxian":this._success_armature.animation.fadeIn("jiangbei4096jingzhi",-1,-1,0,"normal");break;case"jiangbei8192chuxian":this._success_armature.animation.fadeIn("jiangbei8192jingzhi",-1,-1,0,"normal");break;case"jiangbei16384chuxian":this._success_armature.animation.fadeIn("jiangbei16384jingzhi",-1,-1,0,"normal");break;case"jiangbei32768chuxian":this._success_armature.animation.fadeIn("jiangbei32768jingzhi",-1,-1,0,"normal")}},e.prototype.startItemEffect=function(e){var t=this.content.convertToWorldSpaceAR(e),o=this.brushEffectDrag.node.parent.convertToNodeSpaceAR(t);m.default.ITEMTYPE===m.ItemType.hummer?(this.hummerEffectDrag.node.active=!0,this._hummer_armature.animation.fadeIn("daoju1",-1,-1),this.hummerEffectDrag.node.position=o):m.default.ITEMTYPE===m.ItemType.brush?(this.brushEffectDrag.node.active=!0,this._brush_armature.animation.fadeIn("ddjshuazi",-1,-1),this.brushEffectDrag.node.position=o):m.default.ITEMTYPE===m.ItemType.change||m.default.ITEMTYPE===m.ItemType.regret||(m.default.ITEMTYPE===m.ItemType.none?cc.log("报错了? 状态没设置对"):cc.log("有鬼?")),this.hideMaskItem()},e.prototype.getEffectNameByType=function(){return 2048===this._successPhase?"jiangbei2048chuxian":4096===this._successPhase?"jiangbei4096chuxian":8192===this._successPhase?"jiangbei8192chuxian":16384===this._successPhase?"jiangbei16384chuxian":32768===this._successPhase?"jiangbei32768chuxian":void 0},e.prototype.showSuccessNode=function(){cc.log("showSuccessNode--"),this.successEffectDrag.node.parent.active=!0,this._success_armature.animation.fadeIn("fenxiang1",-1,-1,0)},e.prototype.setEffectNode=function(e){this._effect_armature.animation.fadeIn(e,-1,-1,0,"normal")},e.prototype.setEffectName=function(e){var t="";switch(e){case 8:t="dbgood";break;case 9:t="dbgreat";break;case 10:t="dbperfect";break;case 11:t="dbunbele";break;case 12:t="damazing"}""==t||this.setEffectNode(t)},e.prototype.playAudioEffect=function(){if(12<this._audioID)return this._audioID=0,void cc.log("你太牛逼了..连销12个..厉害了，从0继续吧");this._audioID<=0||(this.setEffectName(this._audioID),c.default.playSFX("audio"+this._audioID+".ogg"),this._mergeStep++)},e.prototype.everyTimeMoveCallback=function(){},e.prototype.everyTimeEndCallback=function(){},e.prototype.everyTimeMergeCallBack=function(){for(var e=0;e<this._mergeNode.length;e++)this._score+=Number(this._mergeNode[e].name);this.setLabInfo()},e.prototype.touchEnd=function(e){if(this._clickFlag&&m.default.PLAYSTATE===m.PlayState.normal){this._clickFlag=!1;var t=e.getLocation();this._endPos=cc.v2(t.x,t.y),this.everyTimeMoveCallback(),this.checkSlideDirection(this._endPos),this._step++}},e.prototype.touchStart=function(e){if(this._clickFlag&&m.default.PLAYSTATE===m.PlayState.normal){var t=e.getLocation();this._startPos=cc.v2(t.x,t.y)}else this._clickFlag&&(m.default.PLAYSTATE,m.PlayState.useItem)},e.prototype.touchCancel=function(e){if(this._clickFlag&&m.default.PLAYSTATE===m.PlayState.normal){this._clickFlag=!1;var t=e.getLocation();this._cancelPos=cc.v2(t.x,t.y),this.everyTimeMoveCallback(),this.checkSlideDirection(this._cancelPos),this._step++}},e.prototype.checkSlideDirection=function(e){var t=cc.pSub(this._startPos,e),o=cc.pToAngle(t),n=cc.radiansToDegrees(o);this._slide=45<=n&&n<=135||n<=-45&&-135<=n?u.UpDown:u.LeftRight,this._slide==u.LeftRight?(this._startPos.x>e.x&&(this._direction=l.left),this._startPos.x<e.x&&(this._direction=l.right)):(this._startPos.y>e.y&&(this._direction=l.down),this._startPos.y<e.y&&(this._direction=l.up)),this.slideSquare()},e.prototype.slideSquare=function(){var e=this;this._mergeNode.length=0,this.moveSqrt(),this.everyTimeEndCallback(),this._isMerge?(this._audioID++,this.playAudioEffect(),this.everyTimeMergeCallBack()):(this._audioID=0,c.default.playSFX("move.ogg")),this._isMerge=!1,this.scheduleOnce(function(){if(e.randomSqrtInNULL(),e.checkGameOver()&&m.default.PLAYSTATE===m.PlayState.normal)return m.default.PLAYSTATE=m.PlayState.over,cc.log("游戏结束"),e.gameOver(),void(e._clickFlag=!0)},.2)},e.prototype.gameOver=function(){this.saveHistoryScore();var e=this.getTheEndBigMergeNumber();h.default.submitScoreToWX(e),this.showReliveUI()},e.prototype.showGameOverUI=function(){this.gameOverNode.active=!0},e.prototype.getTheEndBigMergeNumber=function(){for(var e=this.content.childrenCount,t=0,o=0;o<e;o++){var n=this.content.children[o].getComponent(p.default);if(n.isNum()){var i=n.getNum();t<i&&(t=i)}}return t},e.prototype.checkGameOver=function(){for(var e=this.content.childrenCount,t=!0,o=0;o<e;o++){this.content.children[o].getComponent(p.default).isNum()||(t=!1)}t&&(this.checkGameOverAllMerge()&&(t=!1));return t},e.prototype.moveSqrt=function(){for(var e=0;e<this.squareNum;e++)this.calcSlidePosition(e)},e.prototype.calcSlidePosition=function(e){var t,o=new Array;if(t=this._slide==u.LeftRight?this._sqrt[e]:this._sqrt2[e],this._direction==l.left||this._direction==l.up)for(var n=0;n<t.length;n++){t[n].getComponent(p.default).isNum()&&o.push(n)}else for(n=t.length-1;0<=n;n--){t[n].getComponent(p.default).isNum()&&o.push(n)}var i=0;if(this._direction==l.left||this._direction==l.up)for(n=0;n<o.length;n++){var r=null,a=null;r=t[o[n]],a=t[n];var c=r.getComponent(p.default).getNum();if(a.name=c+"",r.getComponent(p.default).setHideNum(c),0<n)if(t[o[n-1]])t[o[n-1]].getComponent(p.default).getHideNum()==(s=r.getComponent(p.default).getHideNum())&&0!=s?(a=t[n-1-i],r.getComponent(p.default).setHideNum(0),a.name=2*c+"",a.isMerge=!0,i++,this._isMerge=!0,this._mergeNode.push(a)):(a=t[n-i]).name=c+"";this.positionMoveAction(r,a,c)}else for(n=0;n<o.length;n++){r=null,a=null;r=t[o[n]],a=t[t.length-n-1];var s;c=r.getComponent(p.default).getNum();if(a.name=c+"",r.getComponent(p.default).setHideNum(c),0<n)if(t[o[n-1]])t[o[n-1]].getComponent(p.default).getHideNum()==(s=r.getComponent(p.default).getHideNum())&&0!=s?(a=t[t.length-n+i],r.getComponent(p.default).setHideNum(0),a.name=2*c+"",a.isMerge=!0,i++,this._isMerge=!0,this._mergeNode.push(a)):(a=t[t.length-n+i-1]).name=c+"";this.positionMoveAction(r,a,c)}},e.prototype.checkGameOverAllMerge=function(){for(var e=0;e<this.squareNum;e++)for(var t=0;t<this.squareNum;t++){if(t<this.squareNum-1)if(this.checkTwoCanBeMerge(this._sqrt[e][t],this._sqrt[e][t+1]))return!0;if(t<this.squareNum-1)if(this.checkTwoCanBeMerge(this._sqrt[e][this.squareNum-t-1],this._sqrt[e][this.squareNum-t-2]))return!0;if(t<this.squareNum-1)if(this.checkTwoCanBeMerge(this._sqrt2[e][t],this._sqrt2[e][t+1]))return!0;if(t<this.squareNum-1)if(this.checkTwoCanBeMerge(this._sqrt2[e][this.squareNum-t-1],this._sqrt2[e][this.squareNum-t-2]))return!0}return!1},e.prototype.randomSqrtInNULL=function(){for(var e=this.content.childrenCount,t=new Array,o=0;o<e;o++){var n=this.content.children[o];n.getComponent(p.default).isNum()||t.push(n)}var i=Math.floor(Math.random()*t.length),r=this.randomNumber();0!=t.length&&t[i].getComponent(p.default).showNumber(r,!0),this._clickFlag=!0},e.prototype.randomNumber=function(){return Math.random()<.8?2:4},e.prototype.randomLocation=function(){return{l:Math.floor(Math.random()*this.squareNum),r:Math.floor(Math.random()*this.squareNum)}},e.prototype.checkTwoCanBeMerge=function(e,t){var o=e.getComponent(p.default),n=t.getComponent(p.default),i=o.isNum(),r=n.isNum();return i&&r?o.getNum()==n.getNum():!(i||!r)},e.prototype.positionMoveAction=function(e,t,o){var n=this;if(e!==t||t.isMerge){e.getComponent(p.default).showNumber(0);var i=cc.instantiate(this.squareItem);i.getComponent(p.default).showNumber(o),i.position=e.position,this.content.addChild(i);var r=cc.moveTo(.2,t.position);i.runAction(cc.sequence(r,cc.callFunc(function(){t.isMerge?(t.getComponent(p.default).showNumber(Number(t.name),!1,!0),t.isMerge=!1):t.getComponent(p.default).showNumber(Number(t.name)),n.content.removeChild(i),i.removeFromParent(),i.destroy()}))),Number(t.name)===this._successPhase&&this.showSuccessNode(),Number(t.name)>this._successPhase&&this.setTheSuccessType(Number(t.name))}},e.prototype.getTargetScoreByType=function(e){switch(e){case r.success_2048:return r.success_4096;case r.success_4096:return r.success_8192;case r.success_8192:return r.success_16384;case r.success_16384:case r.success_32768:return r.success_32768}},e.prototype.setTheSuccessType=function(e){0<=e&&e<2048?this._successPhase=r.success_2048:2048<=e&&e<4096?this._successPhase=r.success_4096:4096<=e&&e<8192?this._successPhase=r.success_8192:8192<=e&&e<16384?this._successPhase=r.success_16384:16384<=e&&e<32768?this._successPhase=r.success_32768:this.showHintUI(s.HintUIType.Failure,"啊哦,出错误了")},e.prototype.reSetGame=function(){this.gameOverNode.active=!1,this.pauseGameNode.active=!1,this.reliveNode.active=!1,this.content.removeAllChildren(),this._sqrt=null,this._sqrt2=null,this._score=0,this._step=0,this._clickFlag=!0,m.default.PLAYSTATE=m.PlayState.normal,m.default.ITEMTYPE=m.ItemType.none,this.initGame(),this.setEffectNode("dbkaishi")},e.prototype.showHintUI=function(e,t){var o=this.hintUINode.getComponent(s.default);return!o.isShowing()&&(o.show(e,t),!0)},e.prototype.showGetItemView=function(e){this._clickItem=e,this.getItemView.getComponent(f.default).showItem(e),this.getItemView.active=!0},e.prototype.returnToHall=function(){cc.director.loadScene("main")},e.prototype.useHemmerItem=function(e){this.judgeItemEnough(m.ItemType.hummer)?(m.default.PLAYSTATE=m.PlayState.useItem,m.default.ITEMTYPE=m.ItemType.hummer,this.useItemManage(e.currentTarget)):this.showGetItemView(m.ItemType.hummer)},e.prototype.useBrushItem=function(e){this.judgeItemEnough(m.ItemType.brush)?(m.default.PLAYSTATE=m.PlayState.useItem,m.default.ITEMTYPE=m.ItemType.brush,this.useItemManage(e.currentTarget)):this.showGetItemView(m.ItemType.brush)},e.prototype.useChangeItem=function(e){this.judgeItemEnough(m.ItemType.change)?(m.default.PLAYSTATE=m.PlayState.useItem,m.default.ITEMTYPE=m.ItemType.change,this.useItemManage(e.currentTarget)):this.showGetItemView(m.ItemType.change)},e.prototype.useRegretItem=function(e){m.default.PLAYSTATE=m.PlayState.useItem,m.default.ITEMTYPE=m.ItemType.regret,this.useItemManage(e.currentTarget)},e.prototype.useItemManage=function(e){this.showItemNode.active=!0,this.showItemNode.getComponent(d.default).init(m.default.ITEMTYPE,e)},e.prototype.hideMaskItem=function(){this.showItemNode.active=!1},e.prototype.calcUserItem=function(e){cc.log("使用了道具");var t=m.default.userInfo;e===m.ItemType.hummer?(t.hummer-=1,t.hummer<0&&(t.hummer=0,cc.log("err--\x3e>>锤子道具数量小于零"))):e===m.ItemType.brush?(t.brush-=1,t.brush<0&&(t.brush=0,cc.log("err--\x3e>>刷子道具数量小于零"))):e===m.ItemType.change&&(t.change-=1,t.change<0&&(t.change=0,cc.log("err--\x3e>>换位道具数量小于零"))),m.default.saveItemData(),this.initBottomItem()},e.prototype.judgeItemEnough=function(e){var t=m.default.userInfo;return e===m.ItemType.brush?1<=t.brush:e===m.ItemType.hummer?1<=t.hummer:e===m.ItemType.change?1<=t.change:void 0},e._instance=null,__decorate([y(cc.SpriteAtlas)],e.prototype,"numberAtlas",void 0),__decorate([y(cc.Prefab)],e.prototype,"squareItem",void 0),__decorate([y(cc.Node)],e.prototype,"content",void 0),__decorate([y(cc.Node)],e.prototype,"uiLayer",void 0),__decorate([y(cc.Node)],e.prototype,"gameOverNode",void 0),__decorate([y(cc.Node)],e.prototype,"showItemNode",void 0),__decorate([y(cc.Node)],e.prototype,"pauseGameNode",void 0),__decorate([y(cc.Node)],e.prototype,"reliveNode",void 0),__decorate([y(cc.Node)],e.prototype,"maskNode",void 0),__decorate([y(cc.Node)],e.prototype,"continueNode",void 0),__decorate([y(cc.Node)],e.prototype,"hintUINode",void 0),__decorate([y(cc.Node)],e.prototype,"getItemView",void 0),__decorate([y(cc.Label)],e.prototype,"targetLab",void 0),__decorate([y(cc.Label)],e.prototype,"currentLab",void 0),__decorate([y(cc.Label)],e.prototype,"historyLab",void 0),__decorate([y(dragonBones.ArmatureDisplay)],e.prototype,"startEffectDrag",void 0),__decorate([y(dragonBones.ArmatureDisplay)],e.prototype,"successEffectDrag",void 0),__decorate([y(dragonBones.ArmatureDisplay)],e.prototype,"hummerEffectDrag",void 0),__decorate([y(dragonBones.ArmatureDisplay)],e.prototype,"brushEffectDrag",void 0),__decorate([y(cc.Prefab)],e.prototype,"mergePrefab",void 0),__decorate([y(cc.Prefab)],e.prototype,"hummerPrefab",void 0),__decorate([y(cc.Prefab)],e.prototype,"popStarPrefab",void 0),__decorate([y(cc.Label)],e.prototype,"brushLab",void 0),__decorate([y(cc.Label)],e.prototype,"hummerLab",void 0),__decorate([y(cc.Label)],e.prototype,"changeLab",void 0),e=o=__decorate([_],e)}(cc.Component);o.default=v,cc._RF.pop()},{"./AudioMgr":"AudioMgr","./GameManager":"GameManager","./GameProp":"GameProp","./GetItemUI":"GetItemUI","./HintUI":"HintUI","./Item":"Item","./config":"config"}],GetItemUI:[function(e,t,o){"use strict";cc._RF.push(t,"54152XhJMZGKKNphpPradHT","GetItemUI"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("./GameManager"),i=cc._decorator,r=i.ccclass,a=i.property,c=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.brushItem=null,e.changeItem=null,e.hemmerItem=null,e}return __extends(e,t),e.prototype.onLoad=function(){},e.prototype.hideAll=function(){this.brushItem.active=!1,this.changeItem.active=!1,this.hemmerItem.active=!1},e.prototype.showItem=function(e){switch(cc.log(e),this.hideAll(),e){case n.ItemType.hummer:this.hemmerItem.active=!0;break;case n.ItemType.change:this.changeItem.active=!0;break;case n.ItemType.brush:this.brushItem.active=!0}},__decorate([a(cc.Node)],e.prototype,"brushItem",void 0),__decorate([a(cc.Node)],e.prototype,"changeItem",void 0),__decorate([a(cc.Node)],e.prototype,"hemmerItem",void 0),e=__decorate([r],e)}(cc.Component);o.default=c,cc._RF.pop()},{"./GameManager":"GameManager"}],HTTPManager:[function(e,t,o){"use strict";cc._RF.push(t,"d17deUMgElIjKpBknjFetsb","HTTPManager"),Object.defineProperty(o,"__esModule",{value:!0});var i=e("../GameManager"),n=function(){function e(){}return e.init=function(e,t){i.default.pinus.init(t,function(){i.default.NETSTATE=!0,cc.log("network init success"),e&&e()})},e.get=function(e,n){return new Promise(function(t,o){i.default.pinus.request(e,n,function(e){200<=e.code&&e.code<=300?t(e):o(e)})})},e}();o.default=n;var r=function(){function e(){}return e.baseUrl="127.0.0.1",e.port=3014,e.REQUERYGATE="gate.gateHandler.queryEntry",e.REQUERYCONNECTOR="connector.entryHandler.enter",e.LOGIN="connector.entryHandler.login",e.REGISTER="connector.entryHandler.register",e.USERITEM="connector.entryHandler.userItem",e}();o.getURL=r,cc._RF.pop()},{"../GameManager":"GameManager"}],HTTPMgr:[function(e,t,o){"use strict";cc._RF.push(t,"8ddeeFDVFJDg7bETY4gu1Kt","HTTPMgr"),Object.defineProperty(o,"__esModule",{value:!0});var s=e("../GameManager"),n=function(){function o(){}return o.get=function(e,t){return this._request(o.baseUrl+e,"GET",t)},o.post=function(e,t){return this._request(o.baseUrl+e,"POST",t)},o._request=function(i,r,a){var c=this;return new Promise(function(e,o){var n=new XMLHttpRequest;n.onload=function(){cc.log("xhr--onLoad")};var t=null;"GET"==r?i+=encodeURI(c.objParam2GetString(a)):t=null==a?null:encodeURI(c.objParam2PostString(a)),cc.log("_request url ----- ",i),n.open(r,i,!0),n.setRequestHeader("content-type","application/x-www-form-urlencoded"),cc.sys.osVersion&&n.setRequestHeader("systemversion",cc.sys.osVersion),s.default.userInfo&&s.default.userInfo.userId&&(cc.log("userId===>>>",s.default.userInfo.userId),n.setRequestHeader("userId",s.default.userInfo.userId)),n.onreadystatechange=function(){if(cc.log("---req readyState---",n.readyState),4==n.readyState&&199<n.status&&n.status<300){cc.log("---req responseText---",n.responseText);try{200==(t=JSON.parse(n.responseText)).code?e(t):o(t)}catch(e){var t;o(t={code:-1,msg:"parse err"})}}},n.onerror=function(e){console.log(e);o({code:-3,msg:"未知错误!"})},n.ontimeout=function(e){o({code:-4,msg:"请求服务器超时!"})},n.send(t)})},o.objParam2PostString=function(e){var t="";for(var o in e)t+=o+"="+e[o],t+="&";return""!=t&&(t=t.slice(0,t.length-1)),t},o.objParam2GetString=function(e){var t="?";for(var o in e)t+=o+"="+e[o],t+="&";return""!=t&&(t=t.slice(0,t.length-1)),t},o.baseUrl="http://localhost:8123/",o}();o.default=n,cc._RF.pop()},{"../GameManager":"GameManager"}],HallGift:[function(e,t,o){"use strict";cc._RF.push(t,"faccdVTwx1O56SUtOJfcw+X","HallGift"),Object.defineProperty(o,"__esModule",{value:!0});var n=cc._decorator,i=n.ccclass,r=n.property,a=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.gift_num1=null,e.gift_num2=null,e.gift_icon1=null,e.gift_icon2=null,e.spf1=null,e.spf2=null,e.spf3=null,e}return __extends(e,t),e.prototype.onLoad=function(){},e.prototype.onEnable=function(){var e=this.getComponent(cc.Animation);e&&e.play()},e.prototype.start=function(){this.init({sign:2,itemType:[1,3]})},e.prototype.init=function(e){this.gift_num1.string=e.sign+"",this.gift_num2.string=e.sign+"",1===e.itemType[0]?this.gift_icon1.spriteFrame=this.spf1:2===e.itemType[0]?this.gift_icon1.spriteFrame=this.spf2:3===e.itemType[0]&&(this.gift_icon1.spriteFrame=this.spf3),1===e.itemType[1]?this.gift_icon2.spriteFrame=this.spf1:2===e.itemType[1]?this.gift_icon2.spriteFrame=this.spf2:3===e.itemType[1]&&(this.gift_icon2.spriteFrame=this.spf3)},e.prototype.onClickCloseBtn=function(){this.node.active=!1},e.prototype.onClickGetBtn=function(){},__decorate([r(cc.Label)],e.prototype,"gift_num1",void 0),__decorate([r(cc.Label)],e.prototype,"gift_num2",void 0),__decorate([r(cc.Sprite)],e.prototype,"gift_icon1",void 0),__decorate([r(cc.Sprite)],e.prototype,"gift_icon2",void 0),__decorate([r(cc.SpriteFrame)],e.prototype,"spf1",void 0),__decorate([r(cc.SpriteFrame)],e.prototype,"spf2",void 0),__decorate([r(cc.SpriteFrame)],e.prototype,"spf3",void 0),e=__decorate([i],e)}(cc.Component);o.default=a,cc._RF.pop()},{}],Hall:[function(e,t,o){"use strict";cc._RF.push(t,"e1b90/rohdEk4SdmmEZANaD","Hall"),Object.defineProperty(o,"__esModule",{value:!0});var i=e("./AudioMgr"),u=e("./GameManager"),n=e("./GameUtils"),l=e("./HintUI"),r=e("./config"),h=e("./net/HTTPMgr"),a=cc._decorator,c=a.ccclass,s=a.property,d=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.helpNode=null,e.hallNode=null,e.loadingNode=null,e.musicNode=null,e.hintUINode=null,e.rankingScrollView=null,e.giftNode=null,e.AuthorizeBtnNode=null,e.tex=null,e._wxCode=null,e._auth=!1,e._preTime=null,e._isShow=!1,e}return __extends(e,t),e.prototype.onLoad=function(){if(u.default.gameState=u.GameState.Hall,i.default.init(),i.default.playBGM("BGM.mp3"),this.initWX(),this.initUserInfo(),0==i.default.bgmVolume){var e=this.musicNode.getChildByName("on"),t=this.musicNode.getChildByName("off");e.active=!1,t.active=!0}},e.prototype.initUserInfo=function(){var e={userName:"other",userId:"xxxxxxx",hummer:2,brush:2,change:2},t=u.default.getItemData();if(t&&""!==t){var o=t.split("_");e.hummer=Number(o[0]),e.brush=Number(o[1]),e.change=Number(o[2])}console.log(e),u.default.userInfo=e,u.default.saveItemData()},e.prototype.initWX=function(){window.wx.showShareMenu({withShareTicket:!0}),this.tex=new cc.Texture2D,window.sharedCanvas.width=720,window.sharedCanvas.height=1280,wx.showShareMenu({success:function(e){console.log(e)},fail:function(e){console.log(e)}}),wx.onShareAppMessage(function(){var e=this;return{title:"来看看谁的得分最高!",success:function(){console.log("转发成功!"),e.showHintUI(l.HintUIType.Success,"转发成功,多谢你的支持!")},fail:function(e){console.log("转发失败---\x3e>",e),this.showHintUI(l.HintUIType.Failure,"转发失败!")}}}),this.initVideo()},e.prototype.initVideo=function(){},e.prototype.initWXLogin=function(){var t=this;wx.login({success:function(e){t._wxCode=e.code}}),this.createAuthorizeBtn(this.AuthorizeBtnNode)},e.prototype.onClickGiftBtn=function(){this.giftNode.active=!0},e.prototype.startGame=function(){var e=this;this.hallNode.active=!1,this.loadingNode.active=!0,cc.director.preloadScene("main",function(){e.scheduleOnce(function(){i.default.StopBGM(),cc.director.loadScene("main")},2.5)})},e.prototype.onClickStart=function(){this.startGame()},e.prototype.onClickHelp=function(){var e=this.node.getChildByName("help");e?e.active=!0:(e=cc.instantiate(this.helpNode),this.node.addChild(e)),e.getChildByName("close").on(cc.Node.EventType.TOUCH_END,function(){e.active=!1},this)},e.prototype.onClickMusic=function(e){var t=e.target,o=t.getChildByName("on"),n=t.getChildByName("off");o.active?(i.default.setBGMVolume(0),o.active=!1,n.active=!0):(i.default.setBGMVolume(1),o.active=!0,n.active=!1)},e.prototype.onClickMoreGame=function(){var e=Date.now();e-this._preTime<=1500||(this._preTime=e,cc.sys.platform,cc.sys.WECHAT_GAME,n.default.popTips(this.node.getChildByName("popLayer"),"功能暂未开放"))},e.prototype.onClickShareBtn=function(){r.default.clickWXShare(this)},e.prototype.onClickRankBtn=function(){this._isShow=!this._isShow,this._isShow&&r.default.clickRankBtn()},e.prototype.onClickCloseRankBtn=function(){this.onClickRankBtn()},e.prototype.showHintUI=function(e,t){var o=this.hintUINode.getComponent(l.default);return!o.isShowing()&&(o.show(e,t),!0)},e.prototype.groupFriendButtonFunc=function(e){window.wx.shareAppMessage({success:function(e){null!=e.shareTickets&&0<e.shareTickets.length&&window.wx.postMessage({messageType:5,MAIN_MENU_NUM:"x1",shareTicket:e.shareTickets[0]})}})},e.prototype._updateSubDomainCanvas=function(){null!=window.sharedCanvas&&(this.tex.initWithElement(window.sharedCanvas),this.tex.handleLoadedTexture(),this.rankingScrollView.spriteFrame=new cc.SpriteFrame(this.tex))},e.prototype.update=function(){this._isShow?(this.rankingScrollView.node.parent.active=!0,this.rankingScrollView.node.active=!0,this._updateSubDomainCanvas()):(this.rankingScrollView.node.parent.active=!1,this.rankingScrollView.node.active=!1)},e.prototype.createAuthorizeBtn=function(e){var i=this,t=cc.size(e.width+10,e.height+10),o=cc.view.getFrameSize(),n=cc.director.getWinSize(),r=(.5*n.width+e.x-.5*t.width)/n.width*o.width,a=(.5*n.height-e.y-.5*t.height)/n.height*o.height,c=t.width/n.width*o.width,s=t.height/n.height*o.height;wx.createUserInfoButton({type:"text",text:"",style:{left:r,top:a,width:c,height:s,lineHeight:0,backgroundColor:"",color:"#ffffff",textAlign:"center",fontSize:16,borderRadius:4}}).onTap(function(e){if(console.log("onTap uinfo: ",e),e.userInfo){console.log("wxLogin auth success");var t=e.iv,o=e.encryptedData,n={userName:e.userInfo.nickName,iv:t,encryptedData:o,code:i._wxCode};i._wxCode&&h.default.post("wxCode",n).then(function(e){console.log(e),u.default.userInfo=e.data,i.showHintUI(l.HintUIType.Success,"登录成功"),wx.setStorageSync("userInfo",e.data),i.startGame()}).catch(function(e){console.log("登录失败--\x3e>>",e),i.showHintUI(l.HintUIType.Success,"登录失败")})}else console.log("wxLogin auth fail"),i.showHintUI(l.HintUIType.Failure,"授权失败")})},__decorate([s(cc.Prefab)],e.prototype,"helpNode",void 0),__decorate([s(cc.Node)],e.prototype,"hallNode",void 0),__decorate([s(cc.Node)],e.prototype,"loadingNode",void 0),__decorate([s(cc.Node)],e.prototype,"musicNode",void 0),__decorate([s(cc.Node)],e.prototype,"hintUINode",void 0),__decorate([s(cc.Sprite)],e.prototype,"rankingScrollView",void 0),__decorate([s(cc.Node)],e.prototype,"giftNode",void 0),__decorate([s(cc.Node)],e.prototype,"AuthorizeBtnNode",void 0),e=__decorate([c],e)}(cc.Component);o.default=d,cc._RF.pop()},{"./AudioMgr":"AudioMgr","./GameManager":"GameManager","./GameUtils":"GameUtils","./HintUI":"HintUI","./config":"config","./net/HTTPMgr":"HTTPMgr"}],HintUI:[function(e,t,o){"use strict";cc._RF.push(t,"1ffe8RMn5BMbp74Ae4XEfJi","HintUI"),Object.defineProperty(o,"__esModule",{value:!0});var n,i,r=cc._decorator,a=r.ccclass,c=r.property;(i=n=o.HintUIType||(o.HintUIType={}))[i.Failure=0]="Failure",i[i.Success=1]="Success";var s=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.succNode=null,e.failureNode=null,e.hintLabel=null,e._isShow=!1,e._anim=null,e}return __extends(e,t),e.prototype.onLoad=function(){this._anim=this.getComponent(cc.Animation),this._anim.on("finished",this.showComplete,this)},e.prototype.show=function(e,t){this._isShow||(this._isShow=!0,this.node.active=!0,this.node.zIndex=10,e==n.Failure?(this.succNode.active=!1,this.failureNode.active=!0):(this.succNode.active=!0,this.failureNode.active=!1),t=null==t?e==n.Failure?"操作失败":"操作成功":t,this.hintLabel.string=t,this.node.width+=this.hintLabel.node.width,this.node.width+=50,this.node.x=-this.node.width/2,this._anim.play())},e.prototype.isShowing=function(){return this._isShow},e.prototype.showComplete=function(){var e=this;this.scheduleOnce(function(){e.hide()},2)},e.prototype.hide=function(){this._isShow=!1,this.node.active=!1,this.node.width=100},__decorate([c(cc.Node)],e.prototype,"succNode",void 0),__decorate([c(cc.Node)],e.prototype,"failureNode",void 0),__decorate([c(cc.Label)],e.prototype,"hintLabel",void 0),e=__decorate([a],e)}(cc.Component);o.default=s,cc._RF.pop()},{}],Interface:[function(e,t,o){"use strict";cc._RF.push(t,"ae1f74j8vNIkrzzJZxpTmbt","Interface"),Object.defineProperty(o,"__esModule",{value:!0}),cc._RF.pop()},{}],Item:[function(e,t,o){"use strict";cc._RF.push(t,"cc31aqQf7VFCKZEvefOS9Xs","Item"),Object.defineProperty(o,"__esModule",{value:!0});var l=e("./Game"),n=e("./GameManager"),i=cc._decorator,r=i.ccclass,a=i.property,c=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.numberSp=null,e.bg=null,e.particleNode=null,e._num=0,e.hideNum=0,e._preClickTime=null,e._act=null,e}return __extends(e,t),e.prototype.onLoad=function(){this.node.on(cc.Node.EventType.TOUCH_END,this.onClick,this)},e.prototype.onClick=function(){if(n.default.PLAYSTATE!==n.PlayState.normal){var e=Date.now();e-this._preClickTime<2e3||(this._preClickTime=e,0!==this._num&&(n.default.ITEMTYPE==n.ItemType.hummer?(l.default.instance.hummerTarNode=this.node,l.default.instance.startItemEffect(this.node.position)):n.default.ITEMTYPE==n.ItemType.brush?(l.default.instance.brushTarNode=this.node,l.default.instance.startItemEffect(this.node.position)):n.default.ITEMTYPE==n.ItemType.change?(l.default.instance.changeTarNode1=this.node,n.default.ITEMTYPE=n.ItemType.change_1,this.playLightEffect(),cc.log("第一个选中")):n.default.ITEMTYPE==n.ItemType.change_1?l.default.instance.changeTarNode1===this.node?this.hideLightEffect():(l.default.instance.changeTarNode2=this.node,l.default.instance.changeEventEffect()):n.default.ITEMTYPE==n.ItemType.regret&&this.showNumber(0)))}},e.prototype.showNumber=function(e,t,o){var n=this;if(void 0===t&&(t=!1),void 0===o&&(o=!1),0==(this._num=e))return this.bg.active=!0,void(this.numberSp.spriteFrame=null);var i=l.default.instance.numberAtlas;if(this.numberSp.spriteFrame=i.getSpriteFrame(e+""),t){this.numberSp.node.scale=.6;var r=cc.scaleTo(.2,1);this.numberSp.node.runAction(r)}if(o){this.numberSp.node.stopAllActions();var a=cc.scaleTo(.15,.1,1),c=cc.scaleTo(.15,1,1),s=cc.callFunc(function(){n.playAnimEffect()}),u=cc.sequence(a,c,s);this.numberSp.node.runAction(u)}},e.prototype.showRandomNumber=function(){var e=Math.floor(10*Math.random()),t=n.default.STATICARR[e];this._num===t?this.showRandomNumber():this.showNumber(t,!1,!0)},e.prototype.playParticle=function(){var e=this;cc.log("播放特效"),this.particleNode.node.active=!0,this.particleNode.resetSystem(),this.particleNode.enabled=!0,this.scheduleOnce(function(){e.particleNode.stopSystem(),e.particleNode.enabled=!1},.5)},e.prototype.playAnimEffect=function(){var e=cc.instantiate(l.default.instance.mergePrefab);this.node.addChild(e),this.scheduleOnce(function(){e.stopAllActions(),e.destroy()},.8)},e.prototype.playPopEffect=function(){var e=cc.instantiate(l.default.instance.popStarPrefab);this.node.addChild(e),this.scheduleOnce(function(){e.destroy()},.6)},e.prototype.playHummerEffect=function(){var e=this,t=cc.instantiate(l.default.instance.hummerPrefab);this.node.addChild(t),this.scheduleOnce(function(){t.destroy(),e.showNumber(0)},.3)},e.prototype.playLightEffect=function(){var e=l.default.instance.numberAtlas;this.numberSp.spriteFrame=e.getSpriteFrame(this._num+"_a");var t=cc.scaleTo(.6,1.05,1.05),o=cc.scaleTo(.6,.95,.95),n=cc.repeatForever(cc.sequence(t,o));this._act=this.node.runAction(n)},e.prototype.hideLightEffect=function(){var e=l.default.instance.numberAtlas;this.numberSp.spriteFrame=e.getSpriteFrame(this._num+""),this._act&&this.node.stopAction(this._act)},e.prototype.isNum=function(){return 0!=this._num},e.prototype.getNum=function(){return this._num},e.prototype.setHideNum=function(e){this.hideNum=e},e.prototype.getHideNum=function(){return this.hideNum},__decorate([a(cc.Sprite)],e.prototype,"numberSp",void 0),__decorate([a(cc.Node)],e.prototype,"bg",void 0),__decorate([a(cc.ParticleSystem)],e.prototype,"particleNode",void 0),e=__decorate([r],e)}(cc.Component);o.default=c,cc._RF.pop()},{"./Game":"Game","./GameManager":"GameManager"}],Login:[function(e,t,o){"use strict";cc._RF.push(t,"4d498SQAbBJIaBFKlHmcbQz","Login"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("./net/HTTPManager"),i=cc._decorator,r=i.ccclass,a=i.property,c=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.inputName=null,e.inputPwd=null,e}return __extends(e,t),e.prototype.onLoad=function(){var t={host:n.getURL.baseUrl,port:n.getURL.port,log:!0};n.default.init(function(){n.default.get(n.getURL.REQUERYGATE,{type:"init"}).then(function(e){console.log(e),t.host=e.host,t.port=e.port,n.default.init(function(){console.log("connector init success")},t)},function(e){console.log(e)})},t)},e.prototype.clickLogin=function(){var e=this.inputName.string,t=this.inputPwd.string;e&&t||console.log("name or pwd must be a string");var o=Object.assign({name:e,pwd:t});n.default.get(n.getURL.LOGIN,o).then(function(e){console.log("res---\x3e>",e)},function(e){console.log("res---\x3e>",e)})},e.prototype.clickRegister=function(){var e=this.inputName.string,t=this.inputPwd.string;e&&t||console.log("name or pwd must be a string");var o=Object.assign({name:e,pwd:t});n.default.get(n.getURL.REGISTER,o).then(function(e){console.log("res---\x3e>",e)},function(e){console.log("res---\x3e>",e)})},__decorate([a(cc.EditBox)],e.prototype,"inputName",void 0),__decorate([a(cc.EditBox)],e.prototype,"inputPwd",void 0),e=__decorate([r],e)}(cc.Component);o.default=c,cc._RF.pop()},{"./net/HTTPManager":"HTTPManager"}],Map:[function(e,t,o){"use strict";cc._RF.push(t,"bdf9aiNnQVGPIgvp2kjoyVP","Map"),Object.defineProperty(o,"__esModule",{value:!0});var n=function(){function e(){this._elements=null,this._elements=new Array}return e.prototype.put=function(e,t){this.contains(e)&&this.remove(e),this._elements.push({key:e,value:t})},e.prototype.get=function(t){try{for(var e=this._elements.length,o=0;o<e;o++)if(this._elements[o].key==t)return this._elements[o].value}catch(e){return console.warn(e.name+":["+t+"]不存在"),null}},e.prototype.remove=function(t){try{for(var e=this._elements.length,o=0;o<e;o++)if(this._elements[o].key==t)return this._elements.splice(o,1),!0}catch(e){return console.warn(e.name+":["+t+"]不存在"),!1}return!1},e.prototype.contains=function(t){try{for(var e=this._elements.length,o=0;o<e;o++)if(this._elements[o].key==t)return!0}catch(e){return console.warn(e.name+":["+t+"]不存在"),!1}return!1},e.prototype.getList=function(){return this._elements},e.prototype.size=function(){return this._elements.length},e.prototype.isEmpty=function(){return this._elements.length<1},e.prototype.clear=function(){this._elements=new Array},e}();o.Map=n,cc._RF.pop()},{}],ReliveScript:[function(e,t,o){"use strict";cc._RF.push(t,"b8ecbu91epCc6F37B0Hyn7f","ReliveScript"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("./Game"),i=cc._decorator,r=i.ccclass,a=i.property,c=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.timeLab=null,e}return __extends(e,t),e.prototype.onEnable=function(){this.startTimeCount();var e=this.getComponent(cc.Animation);e&&e.play()},e.prototype.startTimeCount=function(){var e=this,t=9;this.schedule(function(){e.timeLab.string=t+"",0===t&&(cc.log("游戏结束了哦!"),n.default.instance.onClickReliveCloseBtn()),t--},1,10,1)},e.prototype.onDisable=function(){this.unscheduleAllCallbacks();var e=this.getComponent(cc.Animation);e&&e.stop()},__decorate([a(cc.Label)],e.prototype,"timeLab",void 0),e=__decorate([r],e)}(cc.Component);o.default=c,cc._RF.pop()},{"./Game":"Game"}],VideoAd:[function(e,t,o){"use strict";cc._RF.push(t,"c2779zooV9C/5vYQBcwcLG8","VideoAd"),Object.defineProperty(o,"__esModule",{value:!0});var n=function(){function e(){}return Object.defineProperty(e,"instance",{get:function(){return this._instance||(this._instance=new e),this._instance},enumerable:!0,configurable:!0}),e.prototype.getRewardedVideoAd=function(t,o){var n=wx.createRewardedVideoAd({adUnitId:"adunit-c150f3266bdb2c80"});return n.onLoad(function(){console.log("激励视频 广告加载成功")}),n.onError(function(e){console.log(e),wx.showToast({title:"今日广告已经看完了！明日再来吧",icon:"none",duration:1e3}),o&&o()}),n.show().catch(function(e){n.load().then(function(){return n.show()})}),n.onClose(function(e){console.log(e),e&&e.isEnded||void 0===e?t&&t():(wx.showToast({title:"您的视频还没看完，无法获得奖励",icon:"none",duration:1e3}),o&&o()),n.offClose()}),n},e.prototype.getOneVideo=function(){},e._instance=null,e}();o.default=n,cc._RF.pop()},{}],_Notification_:[function(e,t,o){"use strict";cc._RF.push(t,"96dcci+yEFAlrg9LmbBeHaw","_Notification_"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("./Map"),i=function(){function e(){}return e.init=function(){},e.subscrib=function(e,t,o){if(void 0===o&&(o=null),this._callbackList.contains(e)){this._callbackList.get(e).push([t,o])}else{var n=new Array;n.push([t,o]),this._callbackList.put(e,n)}},e.unsubscrib=function(e,t){if(this._callbackList.contains(e)){for(var o=this._callbackList.get(e),n=o.length,i=0;i<n;i++)if(o[i][0]==t)return o.splice(i,1),!0;return!1}return!1},e.removebByType=function(e){return!!this._callbackList.contains(e)&&this._callbackList.remove(e)},e.removeAll=function(){this._callbackList.clear()},e.send=function(e,t){if(void 0===t&&(t=null),this._callbackList.contains(e))for(var o=this._callbackList.get(e),n=o.length,i=0;i<n;i++){var r=o[i];if(r){r[0](t,r[1]);break}}},e._callbackList=new n.Map,e}();o._Notification_=i,cc._RF.pop()},{"./Map":"Map"}],config:[function(e,t,o){"use strict";cc._RF.push(t,"b7844E7YMhNw7M5v7WeeVq2","config"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("./HintUI"),i=function(){function e(){}return e.submitScoreToWX=function(e){e=e||0,window.wx.postMessage({messageType:3,MAIN_MENU_NUM:"x1",score:e})},e.clickWXShare=function(e){cc.sys.platform===cc.sys.WECHAT_GAME?wx.shareAppMessage({title:"来看看谁的得分最高!",imageUrl:this.shareImg_url,success:function(){console.log("转发成功!")},fail:function(e){console.log("转发失败---\x3e>",e)}}):e.showHintUI(n.HintUIType.Failure,"该平台不支持分享!")},e.clickRankBtn=function(){cc.sys.platform===cc.sys.WECHAT_GAME?this.friendButtonFunc():cc.log("显示排行数据")},e.friendButtonFunc=function(){window.wx.postMessage({messageType:1,MAIN_MENU_NUM:"x1"})},e.shareImg_url="http://112.74.174.202:8080/success.png",e}();o.default=i,cc._RF.pop()},{"./HintUI":"HintUI"}],userModel:[function(e,t,o){"use strict";cc._RF.push(t,"c5463trwAFG+bUs9zS+Y7iD","userModel"),Object.defineProperty(o,"__esModule",{value:!0}),cc._RF.pop()},{}]},{},["AnimEffectScript","AudioMgr","Game","GameManager","GameProp","GameUtils","GetItemUI","Hall","HintUI","Interface","Item","Login","ReliveScript","VideoAd","config","HallGift","userModel","HTTPManager","HTTPMgr","Map","_Notification_"]);