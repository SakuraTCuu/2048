var has=Object.prototype.hasOwnProperty;function require(e,t,r){var n=require.resolve(e);if(null==n){r=r||e,t=t||"root";var o=new Error('Failed to require "'+r+'" from "'+t+'"');throw o.path=r,o.parent=t,o.require=!0,o}var i=require.modules[n];return i.exports||(i.exports={},i.client=i.component=!0,i.call(this,i.exports,require.relative(n),i)),i.exports}require.modules={},require.aliases={},require.resolve=function(e){"/"===e.charAt(0)&&(e=e.slice(1));for(var t=e+"/index.js",r=[e,e+".js",e+".json",e+"/index.js",e+"/index.json"],n=0;n<r.length;n++){e=r[n];if(has.call(require.modules,e))return e}if(has.call(require.aliases,t))return require.aliases[t]},require.normalize=function(e,t){var r=[];if("."!=t.charAt(0))return t;e=e.split("/"),t=t.split("/");for(var n=0;n<t.length;++n)".."==t[n]?e.pop():"."!=t[n]&&""!=t[n]&&r.push(t[n]);return e.concat(r).join("/")},require.register=function(e,t){require.modules[e]=t},require.alias=function(e,t){if(!has.call(require.modules,e))throw new Error('Failed to alias "'+e+'", it does not exist');require.aliases[t]=e},require.relative=function(o){var i=require.normalize(o,"..");function t(e){return require(t.resolve(e),o,e)}return t.resolve=function(e){var t=e.charAt(0);if("/"==t)return e.slice(1);if("."==t)return require.normalize(i,e);var r=o.split("/"),n=function(e,t){for(var r=e.length;r--;)if(e[r]===t)return r;return-1}(r,"deps")+1;return n||(n=0),e=r.slice(0,n+1).join("/")+"/deps/"+e},t.exists=function(e){return has.call(require.modules,t.resolve(e))},t},require.register("component-indexof/index.js",function(e,t,r){var n=[].indexOf;r.exports=function(e,t){if(n)return e.indexOf(t);for(var r=0;r<e.length;++r)if(e[r]===t)return r;return-1}}),require.register("component-emitter/index.js",function(e,t,r){var o=t("indexof");function n(e){if(e)return function(e){for(var t in n.prototype)e[t]=n.prototype[t];return e}(e)}(r.exports=n).prototype.on=function(e,t){return this._callbacks=this._callbacks||{},(this._callbacks[e]=this._callbacks[e]||[]).push(t),this},n.prototype.once=function(e,t){var r=this;function n(){r.off(e,n),t.apply(this,arguments)}return this._callbacks=this._callbacks||{},t._off=n,this.on(e,n),this},n.prototype.off=n.prototype.removeListener=n.prototype.removeAllListeners=function(e,t){if(this._callbacks=this._callbacks||{},0==arguments.length)return this._callbacks={},this;var r=this._callbacks[e];if(!r)return this;if(1==arguments.length)return delete this._callbacks[e],this;var n=o(r,t._off||t);return~n&&r.splice(n,1),this},n.prototype.emit=function(e){this._callbacks=this._callbacks||{};var t=[].slice.call(arguments,1),r=this._callbacks[e];if(r)for(var n=0,o=(r=r.slice(0)).length;n<o;++n)r[n].apply(this,t);return this},n.prototype.listeners=function(e){return this._callbacks=this._callbacks||{},this._callbacks[e]||[]},n.prototype.hasListeners=function(e){return!!this.listeners(e).length}}),require.register("node-pinus-pinus-protocol/lib/protocol.js",function(e,t,n){(function(e,d,t){var b=e,r=b.Package={},o=b.Message={};r.TYPE_HANDSHAKE=1,r.TYPE_HANDSHAKE_ACK=2,r.TYPE_HEARTBEAT=3,r.TYPE_DATA=4,r.TYPE_KICK=5,o.TYPE_REQUEST=0,o.TYPE_NOTIFY=1,o.TYPE_RESPONSE=2,o.TYPE_PUSH=3,b.strencode=function(e){for(var t=new d(3*e.length),r=0,n=0;n<e.length;n++){var o=e.charCodeAt(n),i=null;i=o<=127?[o]:o<=2047?[192|o>>6,128|63&o]:[224|o>>12,128|(4032&o)>>6,128|63&o];for(var s=0;s<i.length;s++)t[r]=i[s],++r}var u=new d(r);return h(u,0,t,0,r),u},b.strdecode=function(e){for(var t=new d(e),r=[],n=0,o=0,i=t.length;n<i;)t[n]<128?(o=t[n],n+=1):t[n]<224?(o=((63&t[n])<<6)+(63&t[n+1]),n+=2):(o=((15&t[n])<<12)+((63&t[n+1])<<6)+(63&t[n+2]),n+=3),r.push(o);var s,u="";for(s=0;s<r.length/8192;s++)u+=String.fromCharCode.apply(null,r.slice(8192*s,8192*(s+1)));return u+=String.fromCharCode.apply(null,r.slice(8192*s))},r.encode=function(e,t){var r=t?t.length:0,n=new d(4+r),o=0;return n[o++]=255&e,n[o++]=r>>16&255,n[o++]=r>>8&255,n[o++]=255&r,t&&h(n,4,t,0,r),n},r.decode=function(e){var t=new d(e),r=t[0],n=1,o=(t[n++]<<16|t[n++]<<8|t[n++])>>>0,i=o?new d(o):null;return h(i,0,t,4,o),{type:r,body:i}},o.encode=function(e,t,r,n,o){var i=v(t)?a(e):0,s=1+i;if(y(t))if(r){if("number"!=typeof n)throw new Error("error flag for number route!");s+=2}else if(s+=1,n){if(255<(n=b.strencode(n)).length)throw new Error("route maxlength is overflow");s+=n.length}o&&(s+=o.length);var u=new d(s),c=0;return c=l(t,r,u,c),v(t)&&(c=f(e,i,u,c)),y(t)&&(c=p(r,n,u,c)),o&&(c=g(o,u,c)),u},o.decode=function(e){var t=new d(e),r=t.length||t.byteLength,n=0,o=0,i=null,s=t[n++],u=1&s,c=s>>1&7;if(v(c)){var a=t[n++];for(o=127&a;128&a;)o<<=7,o|=127&(a=t[n++])}if(y(c))if(u)i=t[n++]<<8|t[n++];else{var l=t[n++];l?(i=new d(l),h(i,0,t,n,l),i=b.strdecode(i)):i="",n+=l}var f=r-n,p=new d(f);return h(p,0,t,n,f),{id:o,type:c,compressRoute:u,route:i,body:p}};var h=function(e,t,r,n,o){if("function"==typeof r.copy)r.copy(e,t,n,n+o);else for(var i=0;i<o;i++)e[t++]=r[n++]},v=function(e){return e===o.TYPE_REQUEST||e===o.TYPE_RESPONSE},y=function(e){return e===o.TYPE_REQUEST||e===o.TYPE_NOTIFY||e===o.TYPE_PUSH},a=function(e){for(var t=0;t+=1,0<(e>>=7););return t},l=function(e,t,r,n){if(e!==o.TYPE_REQUEST&&e!==o.TYPE_NOTIFY&&e!==o.TYPE_RESPONSE&&e!==o.TYPE_PUSH)throw new Error("unkonw message type: "+e);return r[n]=e<<1|(t?1:0),n+1},f=function(e,t,r,n){var o=n+t-1;for(r[o--]=127&e;n<=o;)e>>=7,r[o--]=127&e|128;return n+t},p=function(e,t,r,n){if(e){if(65535<t)throw new Error("route number is overflow");r[n++]=t>>8&255,r[n++]=255&t}else t?(r[n++]=255&t.length,h(r,n,t,0,t.length),n+=t.length):r[n++]=0;return n},g=function(e,t,r){return h(t,r,e,0,e.length),r+e.length};n.exports=b})("object"==typeof n?n.exports:this.Protocol={},"object"==typeof n?Buffer:Uint8Array)}),require.register("pinusnode-pinus-protobuf/lib/client/protobuf.js",function(e,t,a){var r,n;r="object"==typeof a?a.exports:this.protobuf={},(n=r).init=function(e){n.encoder.init(e.encoderProtos),n.decoder.init(e.decoderProtos)},n.encode=function(e,t){return n.encoder.encode(e,t)},n.decode=function(e,t){return n.decoder.decode(e,t)},a.exports=n,(("undefined"!=typeof protobuf?protobuf:a.exports).constants={}).TYPES={uInt32:0,sInt32:0,int32:0,double:1,string:2,message:2,float:5},(("undefined"!=typeof protobuf?protobuf:a.exports).util={}).isSimpleType=function(e){return"uInt32"===e||"sInt32"===e||"int32"===e||"uInt64"===e||"sInt64"===e||"float"===e||"double"===e},function(e,t){var r=("undefined"!==typeof protobuf?protobuf:a.exports).codec={},n=new ArrayBuffer(8),o=new Float32Array(n),i=new Float64Array(n),s=new Uint8Array(n);function u(e){return e<=127?[e]:e<=2047?[192|e>>6,128|63&e]:[224|e>>12,128|(4032&e)>>6,128|63&e]}function c(e){return e<=127?1:e<=2047?2:3}r.encodeUInt32=function(e){e=parseInt(e);if(isNaN(e)||e<0)return null;var t=[];do{var r=e%128,n=Math.floor(e/128);0!==n&&(r+=128),t.push(r),e=n}while(0!==e);return t},r.encodeSInt32=function(e){e=parseInt(e);return isNaN(e)?null:(e=e<0?2*Math.abs(e)-1:2*e,r.encodeUInt32(e))},r.decodeUInt32=function(e){for(var t=0,r=0;r<e.length;r++){var n=parseInt(e[r]);if(t+=(127&n)*Math.pow(2,7*r),n<128)return t}return t},r.decodeSInt32=function(e){var t=this.decodeUInt32(e);return t=(t%2+t)/2*(t%2==1?-1:1)},r.encodeFloat=function(e){return o[0]=e,s},r.decodeFloat=function(e,t){if(!e||e.length<t+4)return null;for(var r=0;r<4;r++)s[r]=e[t+r];return o[0]},r.encodeDouble=function(e){return i[0]=e,s.subarray(0,8)},r.decodeDouble=function(e,t){if(!e||e.length<8+t)return null;for(var r=0;r<8;r++)s[r]=e[t+r];return i[0]},r.encodeStr=function(e,t,r){for(var n=0;n<r.length;n++)for(var o=u(r.charCodeAt(n)),i=0;i<o.length;i++)e[t]=o[i],t++;return t},r.decodeStr=function(e,t,r){for(var n=[],o=t+r;t<o;){var i=0;e[t]<128?(i=e[t],t+=1):e[t]<224?(i=((63&e[t])<<6)+(63&e[t+1]),t+=2):(i=((15&e[t])<<12)+((63&e[t+1])<<6)+(63&e[t+2]),t+=3),n.push(i)}for(var s="",u=0;u<n.length;)s+=String.fromCharCode.apply(null,n.slice(u,u+1e4)),u+=1e4;return s},r.byteLength=function(e){if("string"!=typeof e)return-1;for(var t=0,r=0;r<e.length;r++){t+=c(e.charCodeAt(r))}return t}}(),function(e,t){var r=e,n=e.encoder={},c=r.codec,o=r.constants,s=r.util;function a(e,t,r,n){for(var o in n)if(r[o]){var i=r[o];switch(i.option){case"required":case"optional":t=f(e,t,p(i.type,i.tag)),t=u(n[o],i.type,t,e,r);break;case"repeated":0<n[o].length&&(t=l(n[o],i,t,e,r))}}return t}function u(e,t,r,n,o){switch(t){case"uInt32":r=f(n,r,c.encodeUInt32(e));break;case"int32":case"sInt32":r=f(n,r,c.encodeSInt32(e));break;case"float":f(n,r,c.encodeFloat(e)),r+=4;break;case"double":f(n,r,c.encodeDouble(e)),r+=8;break;case"string":var i=c.byteLength(e);r=f(n,r,c.encodeUInt32(i)),c.encodeStr(n,r,e),r+=i;break;default:if(o.__messages[t]){var s=new ArrayBuffer(c.byteLength(JSON.stringify(e)));i=a(s,i=0,o.__messages[t],e),r=f(n,r,c.encodeUInt32(i));for(var u=0;u<i;u++)n[r]=s[u],r++}}return r}function l(e,t,r,n,o){var i=0;if(s.isSimpleType(t.type))for(r=f(n,r=f(n,r,p(t.type,t.tag)),c.encodeUInt32(e.length)),i=0;i<e.length;i++)r=u(e[i],t.type,r,n);else for(i=0;i<e.length;i++)r=f(n,r,p(t.type,t.tag)),r=u(e[i],t.type,r,n,o);return r}function f(e,t,r){for(var n=0;n<r.length;n++,t++)e[t]=r[n];return t}function p(e,t){var r=o.TYPES[e]||2;return c.encodeUInt32(t<<3|r)}n.init=function(e){this.protos=e||{}},n.encode=function(e,t){var r=this.protos[e];if(!function e(t,r){if(!r)return!1;for(var n in r){var o=r[n];switch(o.option){case"required":if(void 0===t[n])return!1;case"optional":void 0!==t[n]&&r.__messages[o.type]&&e(t[n],r.__messages[o.type]);break;case"repeated":if(t[n]&&r.__messages[o.type])for(var i=0;i<t[n].length;i++)if(!e(t[n][i],r.__messages[o.type]))return!1}}return!0}(t,r))return null;var n=c.byteLength(JSON.stringify(t)),o=new ArrayBuffer(n),i=new Uint8Array(o),s=0;return r&&0<(s=a(i,s,r,t))?i.subarray(0,s):null}}("undefined"!=typeof protobuf?protobuf:a.exports),function(e,t){var u,r=e,n=e.decoder={},c=r.codec,i=r.util,a=0;function l(e,t,r){for(;a<r;){var n=(void 0,{type:7&(s=c.decodeUInt32(d())),tag:s>>3}),o=n.tag,i=t.__tags[o];switch(t[i].option){case"optional":case"required":e[i]=f(t[i].type,t);break;case"repeated":e[i]||(e[i]=[]),p(e[i],t[i].type,t)}}var s;return e}function f(e,t){switch(e){case"uInt32":return c.decodeUInt32(d());case"int32":case"sInt32":return c.decodeSInt32(d());case"float":var r=c.decodeFloat(u,a);return a+=4,r;case"double":var n=c.decodeDouble(u,a);return a+=8,n;case"string":var o=c.decodeUInt32(d()),i=c.decodeStr(u,a,o);return a+=o,i;default:if(t&&t.__messages[e]){o=c.decodeUInt32(d());var s={};return l(s,t.__messages[e],a+o),s}}}function p(e,t,r){if(i.isSimpleType(t))for(var n=c.decodeUInt32(d()),o=0;o<n;o++)e.push(f(t));else e.push(f(t,r))}function d(e){var t,r=[],n=a;for(e=e||!1;t=u[n],r.push(t),n++,128<=t;);return e||(a=n),r}n.init=function(e){this.protos=e||{}},n.setProtos=function(e){e&&(this.protos=e)},n.decode=function(e,t){var r=this.protos[e];return u=t,a=0,r?l({},r,u.length):null}}("undefined"!=typeof protobuf?protobuf:a.exports)}),require.register("pinusnode-pinus-jsclient-websocket/lib/pinus-client.js",function(e,t,x){(function(){var s=window.Protocol,u=s.Package,c=s.Message,e=window.EventEmitter;"function"!=typeof Object.create&&(Object.create=function(e){function t(){}return t.prototype=e,new t});var t=window,a=Object.create(e.prototype);t.pinus=a;var r=null,n=0,o={},i={},l={},f=0,p=0,d=0,b=null,h=null,v=null,y={sys:{type:"js-websocket",version:"0.0.1"},user:{}},g=null;a.init=function(e,t){g=t;var r=e.host,n=e.port,o="ws://"+r;n&&(o+=":"+n),y.user=e.user,v=e.handshakeCallback,w(o,t)};var w=function(e,t){console.log("connect to "+e);(r=new WebSocket(e)).binaryType="arraybuffer",r.onopen=function(e){var t=u.encode(u.TYPE_HANDSHAKE,s.strencode(JSON.stringify(y)));_(t)},r.onmessage=function(e){T(u.decode(e.data),t),p&&(d=Date.now()+p)},r.onerror=function(e){a.emit("io-error",e),console.error("socket error: ",e)},r.onclose=function(e){a.emit("close",e),console.error("socket close: ",e)}};a.disconnect=function(){r&&(r.disconnect&&r.disconnect(),r.close&&r.close(),console.log("disconnect"),r=null),b&&(clearTimeout(b),b=null),h&&(clearTimeout(h),h=null)},a.request=function(e,t,r){2===arguments.length&&"function"==typeof t?(r=t,t={}):t=t||{},(e=e||t.route)&&(E(++n,e,t),o[n]=r,l[n]=e)},a.notify=function(e,t){E(0,e,t=t||{})};var E=function(e,t,r){var n=e?c.TYPE_REQUEST:c.TYPE_NOTIFY;r=(a.data.protos?a.data.protos.client:{})[t]?protobuf.encode(t,r):s.strencode(JSON.stringify(r));var o=0;a.dict&&a.dict[t]&&(t=a.dict[t],o=1),r=c.encode(e,n,o,t,r);var i=u.encode(u.TYPE_DATA,r);_(i)},_=function(e){r.send(e.buffer)},m=function(){var e=d-Date.now();100<e?h=setTimeout(m,e):(console.error("server heartbeat timeout"),a.emit("heartbeat timeout"),a.disconnect())};i[u.TYPE_HANDSHAKE]=function(e){if(501!==(e=JSON.parse(s.strdecode(e))).code)if(200===e.code){q(e);var t=u.encode(u.TYPE_HANDSHAKE_ACK);_(t),g&&(g(r),g=null)}else a.emit("error","handshake fail");else a.emit("error","client version not fullfill")},i[u.TYPE_HEARTBEAT]=function(e){if(f){var t=u.encode(u.TYPE_HEARTBEAT);h&&(clearTimeout(h),h=null),b||(b=setTimeout(function(){b=null,_(t),d=Date.now()+p,h=setTimeout(m,p)},f))}},i[u.TYPE_DATA]=function(e){var t=c.decode(e);0<t.id&&(t.route=l[t.id],delete l[t.id],!t.route)||(t.body=P(t),j(a,t))},i[u.TYPE_KICK]=function(e){a.emit("onKick")};var T=function(e){i[e.type](e.body)},j=function(e,t){if(t.id){var r=o[t.id];delete o[t.id],"function"==typeof r&&r(t.body)}else e.emit(t.route,t.body)},P=function(e){var t=a.data.protos?a.data.protos.server:{},r=a.data.abbrs,n=e.route;if(e.compressRoute){if(!r[n])return{};n=e.route=r[n]}return t[n]?protobuf.decode(n,e.body):JSON.parse(s.strdecode(e.body))},q=function(e){e.sys&&e.sys.heartbeat?(f=1e3*e.sys.heartbeat,p=2*f):p=f=0,k(e),"function"==typeof v&&v(e.user)},k=function(e){if(e&&e.sys){a.data=a.data||{};var t=e.sys.dict,r=e.sys.protos;if(t)for(var n in a.data.dict=t,a.data.abbrs={},t)a.data.abbrs[t[n]]=n;r&&(a.data.protos={server:r.server||{},client:r.client||{}},protobuf&&protobuf.init({encoderProtos:r.client,decoderProtos:r.server}))}};x.exports=a})()}),require.register("boot/index.js",function(e,t,r){var n=t("emitter");window.EventEmitter=n;var o=t("pinus-protocol");window.Protocol=o;var i=t("pinus-protobuf");window.protobuf=i;var s=t("pinus-jsclient-websocket");window.pinus=s}),require.alias("boot/index.js","pinus-client/deps/boot/index.js"),require.alias("component-emitter/index.js","boot/deps/emitter/index.js"),require.alias("component-indexof/index.js","component-emitter/deps/indexof/index.js"),require.alias("node-pinus-pinus-protocol/lib/protocol.js","boot/deps/pinus-protocol/lib/protocol.js"),require.alias("node-pinus-pinus-protocol/lib/protocol.js","boot/deps/pinus-protocol/index.js"),require.alias("node-pinus-pinus-protocol/lib/protocol.js","node-pinus-pinus-protocol/index.js"),require.alias("pinusnode-pinus-protobuf/lib/client/protobuf.js","boot/deps/pinus-protobuf/lib/client/protobuf.js"),require.alias("pinusnode-pinus-protobuf/lib/client/protobuf.js","boot/deps/pinus-protobuf/index.js"),require.alias("pinusnode-pinus-protobuf/lib/client/protobuf.js","pinusnode-pinus-protobuf/index.js"),require.alias("pinusnode-pinus-jsclient-websocket/lib/pinus-client.js","boot/deps/pinus-jsclient-websocket/lib/pinus-client.js"),require.alias("pinusnode-pinus-jsclient-websocket/lib/pinus-client.js","boot/deps/pinus-jsclient-websocket/index.js"),require.alias("pinusnode-pinus-jsclient-websocket/lib/pinus-client.js","pinusnode-pinus-jsclient-websocket/index.js"),require("boot");